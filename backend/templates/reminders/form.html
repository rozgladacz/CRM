{% extends "base.html" %}
{% block content %}
<h1>{% if mode == 'edit' %}Edytuj przypomnienie{% else %}Dodaj przypomnienie{% endif %}</h1>
<form method="post">
    <div class="form-row">
        <label for="tresc">Treść *</label>
        <textarea id="tresc" name="tresc" rows="4" required>{{ form_data.tresc }}</textarea>
        {% if errors.tresc %}<div class="error">{{ errors.tresc }}</div>{% endif %}
    </div>
    <div class="form-row">
        <label for="client_id">Klient *</label>
        <select id="client_id" name="client_id" required>
            <option value="">Wybierz klienta</option>
            {% for client in clients %}
            <option value="{{ client.id }}" {% if form_data.client_id == client.id|string %}selected{% endif %}>
                {{ client.imie }} {{ client.nazwisko }}
            </option>
            {% endfor %}
        </select>
        {% if errors.client_id %}<div class="error">{{ errors.client_id }}</div>{% endif %}
    </div>
    <div class="form-row">
        <label for="policy_id">Polisa</label>
        <select id="policy_id" name="policy_id">
            <option value="">Brak</option>
            {% for policy in policies %}
            <option value="{{ policy.id }}" {% if form_data.policy_id == policy.id|string %}selected{% endif %}>
                {{ policy.numer_polisy }} ({{ policy.client.imie }} {{ policy.client.nazwisko }})
            </option>
            {% endfor %}
        </select>
        {% if errors.policy_id %}<div class="error">{{ errors.policy_id }}</div>{% endif %}
    </div>
    <div class="form-row">
        <label for="data_przypomnienia">Data i godzina *</label>
        <input id="data_przypomnienia" name="data_przypomnienia" type="datetime-local" value="{{ form_data.data_przypomnienia }}" required />
        {% if errors.data_przypomnienia %}<div class="error">{{ errors.data_przypomnienia }}</div>{% endif %}
    </div>
    <div class="form-row">
        <label for="wyslano">Wysłano</label>
        <input id="wyslano" name="wyslano" type="checkbox" value="1" {% if form_data.wyslano %}checked{% endif %} />
    </div>
    <div class="actions">
        <button type="submit">Zapisz</button>
        <a href="{% if mode == 'edit' %}{{ url_for('reminders.reminder_detail', reminder_id=reminder.id) }}{% else %}{{ url_for('reminders.list_reminders') }}{% endif %}">Anuluj</a>
    </div>
</form>
{% endblock %}
