{% extends "base.html" %}
{% block content %}
<h1>{% if mode == 'edit' %}Edytuj polisę{% else %}Dodaj polisę{% endif %}</h1>
<form method="post">
    <div class="form-row">
        <label for="numer_polisy">Numer polisy *</label>
        <input id="numer_polisy" name="numer_polisy" type="text" value="{{ form_data.numer_polisy }}" required />
        {% if errors.numer_polisy %}<div class="error">{{ errors.numer_polisy }}</div>{% endif %}
    </div>
    <div class="form-row">
        <label for="client_id">Klient *</label>
        <select id="client_id" name="client_id" required>
            <option value="">Wybierz klienta</option>
            {% for client in clients %}
            <option value="{{ client.id }}" {% if form_data.client_id == client.id|string %}selected{% endif %}>
                {{ client.imie }} {{ client.nazwisko }}
            </option>
            {% endfor %}
        </select>
        {% if errors.client_id %}<div class="error">{{ errors.client_id }}</div>{% endif %}
    </div>
    <div class="form-row">
        <label for="produkt">Produkt</label>
        <input id="produkt" name="produkt" type="text" value="{{ form_data.produkt }}" />
    </div>
    <div class="form-row">
        <label for="data_poczatku">Data początku *</label>
        <input id="data_poczatku" name="data_poczatku" type="date" value="{{ form_data.data_poczatku }}" required />
        {% if errors.data_poczatku %}<div class="error">{{ errors.data_poczatku }}</div>{% endif %}
    </div>
    <div class="form-row">
        <label for="data_konca">Data końca</label>
        <input id="data_konca" name="data_konca" type="date" value="{{ form_data.data_konca }}" />
        {% if errors.data_konca %}<div class="error">{{ errors.data_konca }}</div>{% endif %}
    </div>
    <div class="form-row">
        <label for="skladka">Składka</label>
        <input id="skladka" name="skladka" type="text" value="{{ form_data.skladka }}" />
        {% if errors.skladka %}<div class="error">{{ errors.skladka }}</div>{% endif %}
    </div>
    <div class="form-row">
        <label for="status">Status</label>
        <input id="status" name="status" type="text" value="{{ form_data.status }}" />
    </div>
    <div class="actions">
        <button type="submit">Zapisz</button>
        <a href="{% if mode == 'edit' %}{{ url_for('policies.policy_detail', policy_id=policy.id) }}{% else %}{{ url_for('policies.list_policies') }}{% endif %}">Anuluj</a>
    </div>
</form>
{% endblock %}
